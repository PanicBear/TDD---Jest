# 테스트란?

더 공부해 볼 것: contract test, A/B test, stress test
복습: No
수강일: 2021년 12월 7일
유형: 이론

## 테스트란(What)

- 정의
    - 제품 및 서비스의 품질을 확인
    - 소프트웨어 디버그 찾기
    - **제품이 원하는 대로 동작하는지 확인**
- 요구사항
    - 함수
    - 특정한 기능
    - UI
    - 성능
    - API 스펙
- 확인하고자하는 요구사항에 따라 달라지는 것
    - 테스트코드 구현사항
    - 사용하는 프레임워크 & 라이브러리

## 테스트가 필요한 시점(When)

- 테스트의 역사
    - 수작업으로 테스트
        - 개발 → 테스트 → 배포
        - 테스트 상 병목현상 발생
    - 자동화
        - 개발 → 테스트 자동화 → 배포
        - 코드 작성 후 테스트 하기에 병목현상 해결불가
    - 최근 동향
        - 개발 + 자동 테스트 → 배포
        - 개발 중 자동으로 테스트 코드가 진행되도록 진행
        - 속도가 빠르고, 개발 중 테스트 코드를 작성하기에 간편하게 작성
        - 높은 커버리지 : 개발 중 해당 기능에 대한 코드 작성
- 테스트 개발 통합의 이점
    - 자동화
    - 빠른 속도
    - 쉽게 작성 가능
    - 높은 커버리지 : 기능 개발 중 해당 테스트 코드 작성

## 테스트의 이유와 장점(Why)

- 기능 동작여부 확인
- 요구 사항 만족
    - 요구 사항에 대한 이해
    - 요구 사항에 목록 숙지
- 이슈 예측
- 신속한 버그 발견
- 리팩토링
- 손쉬운 유지보수
- 코드 품질 향상
- 코드간 의존상 하향
- 테스트 코드를 통한 문서화
- 개발 시간 절약

## 테스트 피라미드(How)

- 모든 개발자들이 공통적으로 작성해야하는 테스트 코드
    - E2E Test(end-to-end)
        - UI 테스트
        - 사용자 테스트
    - Integration Test
        - 통합 테스트(모듈들, 클래스들)
    - Unit Test
        - 함수, 모듈, 클래스
    
- Unit Test
    - 독립적인 단위 : 바퀴, 엔진
    - 함수
    - 모듈
    - 클래스 등
- Integration Test
    - 통합된 unit들 : 바퀴와 엔진 간의 관계
    - 모듈들
    - 클래스들
- E2E 테스트
    - 사용 시 발생 가능한 문제 테스트 : 운전 테스트
    - 최종 사용자 테스트
    - UI 테스트
    - 사용자 테스트
- 비용 & 속도
    - 비용
        - 테스트 비용
        - 개발적 비용(효율성)
    - 테스트 속도
        - 사용자 환경에 맞춰야 하기에, 느림
    

## TDD란 무엇인가?

- 정의
    - Test-driven development : 테스트 주도 개발
    - 개발(코드 작성)전 테스트 코드를 먼저 작성
- 작성 방법
    1. 테스트 코드 작성
    2. 테스트 실행
    3. 테스트 결과 ? 테스트 코드 작성 : 테스트가 성공할만큼의 코드만 작성
    4. 기능 구현 완료 시 리팩토링   
- 장점
    - 모든 요구사항(목표)에 대해 점검할 수 있다
        - 테스트 코드 작성을 위해 요구 사항 분석 및 이해를 거치게 됨
    - 사용자 입장에서 코드를 작성하게된다
        - 내부 구현사항보다 인터페이스 위주로 코드를 작성하게 되기 때문에
        - 커플링 방지는 덤
    - 시스템 전반적인 설계 향상
        - 설계적 측면에서 테스트 코드 작성하기에
- 특징
    - master 브랜치에 merge되고자 하는 모든 코드는 테스트 코드를 포함하여야 한다
    - 혹은 사용자에게 배포되는 코드라면 테스트 코드를 포함
        - 작성 & 수정한 코드에 버그가 없음을 증명
        - 좋은 문서화가 됨
    - UI는 TDD를 하지는 않음(일반화 아님)
        - 비즈니스 로직과 분리
- TDD가 효과적인 상황
    - 요구사항이 명확한 경우
    - 작성하는 것이 비즈니스 로직인 경우
    - 협업 시 명세서 역할
        - 테스트 코드 작성을 통해 예상 결과물에 대한 효과적인 설명
        - 협업하는 개발자들에게 테스트 코드를 바탕으로 분배
    - 설계에 대한 고민이 필요할 때
        - "특정 기능 포함된 함수나 클래스를 작성합시다"
        - "어떤 클래스들을 상호작용 하도록 제작합시다"

## CI/CD에서의 TDD

- 모든 코드에 대해 테스트 코드가 존재한다는 가정 하에, CI/CD의 효과가 증폭됨
- CI/CD의 특징
    - 코드 변경사항을 주기적으로 빈번하게 머지해야 한다
    - 통합을 위한 단계의 자동화
        - 빌드
        - 테스트(기존 테스트를 실패 시키는지 여부도 확인해야)
        - 머지
    - CI의 장점은 테스트 코드가 있다는 것을 전제로 한다
        - 코드 퀄리티 향상
        - 개발 생산성 향상
        - 버그 수정 용이
        - 문제점 빠르게 발견